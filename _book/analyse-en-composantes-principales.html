<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 2 Analyse en Composantes Principales | Méthodes Quantitatives en Géographie</title>
<meta name="author" content="Hugo Périlleux">
<meta name="description" content="2.1 Objectif: L’objectif de ce TP est de réaliser une analyse en composante principale sur base de données électorales.  2.2 Données: données des élections présidentielles 2022 par communes :...">
<meta name="generator" content="bookdown 0.41 with bs4_book()">
<meta property="og:title" content="Chapter 2 Analyse en Composantes Principales | Méthodes Quantitatives en Géographie">
<meta property="og:type" content="book">
<meta property="og:description" content="2.1 Objectif: L’objectif de ce TP est de réaliser une analyse en composante principale sur base de données électorales.  2.2 Données: données des élections présidentielles 2022 par communes :...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 2 Analyse en Composantes Principales | Méthodes Quantitatives en Géographie">
<meta name="twitter:description" content="2.1 Objectif: L’objectif de ce TP est de réaliser une analyse en composante principale sur base de données électorales.  2.2 Données: données des élections présidentielles 2022 par communes :...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.8.0/transition.js"></script><script src="libs/bs3compat-0.8.0/tabs.js"></script><script src="libs/bs3compat-0.8.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Méthodes Quantitatives en Géographie</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Introduction</a></li>
<li><a class="" href="r%C3%A9gressions.html"><span class="header-section-number">1</span> Régressions</a></li>
<li><a class="active" href="analyse-en-composantes-principales.html"><span class="header-section-number">2</span> Analyse en Composantes Principales</a></li>
<li><a class="" href="classification.html"><span class="header-section-number">3</span> Classification</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="analyse-en-composantes-principales" class="section level1" number="2">
<h1>
<span class="header-section-number">2</span> Analyse en Composantes Principales<a class="anchor" aria-label="anchor" href="#analyse-en-composantes-principales"><i class="fas fa-link"></i></a>
</h1>
<div id="objectif" class="section level2" number="2.1">
<h2>
<span class="header-section-number">2.1</span> Objectif:<a class="anchor" aria-label="anchor" href="#objectif"><i class="fas fa-link"></i></a>
</h2>
<p>L’objectif de ce TP est de réaliser une analyse en composante principale sur base de données électorales.</p>
</div>
<div id="données" class="section level2" number="2.2">
<h2>
<span class="header-section-number">2.2</span> Données:<a class="anchor" aria-label="anchor" href="#donn%C3%A9es"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>données des élections présidentielles 2022 par communes : pres2022comm.csv (<a href="https://unehistoireduconflitpolitique.fr/telecharger.html" class="uri">https://unehistoireduconflitpolitique.fr/telecharger.html</a>)</li>
</ul>
<p>Ce fichier contient les résultats des élections présidentielles de 2022 en format csv. Ces fichiers ont été générés à partir des résultats électoraux disponibles sur le site du Ministère de l’Intérieur et sur data.gouv.fr. J. Cagé et T. Piketty (2023) : Une histoire du conflit politique. Élections et inégalités sociales en France, 1789-2022. Le Seuil.</p>
<ul>
<li><p>communes: communes-20220101.shp (1)</p></li>
<li><p>arrondissement municipaux: arrondissements_municipaux-20180711.shp (2)</p></li>
<li><p>table commune - région : commune2021.csv (3)</p></li>
<li><p>revenus par commune : FILO2021_DEC_COM.xlsx (4)</p></li>
<li><p>population par commune: population_insee_2021.xlsx (5)</p></li>
</ul>
<ol style="list-style-type: decimal">
<li>INSEE: <a href="https://www.data.gouv.fr/fr/datasets/decoupage-administratif-communal-francais-issu-d-openstreetmap/" class="uri">https://www.data.gouv.fr/fr/datasets/decoupage-administratif-communal-francais-issu-d-openstreetmap/</a>
</li>
<li>INSEE: <a href="https://www.data.gouv.fr/fr/datasets/decoupage-administratif-communal-francais-issu-d-openstreetmap/" class="uri">https://www.data.gouv.fr/fr/datasets/decoupage-administratif-communal-francais-issu-d-openstreetmap/</a>
</li>
<li>INSEE: <a href="https://www.insee.fr/fr/information/2560452" class="uri">https://www.insee.fr/fr/information/2560452</a>
</li>
<li>INSEE: <a href="https://www.insee.fr/fr/statistiques/7756855?sommaire=7756859" class="uri">https://www.insee.fr/fr/statistiques/7756855?sommaire=7756859</a>
</li>
<li>INSEE : <a href="https://www.insee.fr/fr/statistiques/7739582?sommaire=7728826" class="uri">https://www.insee.fr/fr/statistiques/7739582?sommaire=7728826</a>
</li>
</ol>
<p>Pour ce TP nous utiliserons les packages suivants:</p>
<p>De façon maintenant habituelle:</p>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://riatelab.github.io/mapsf/">mapsf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org">readxl</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org">remotes</a></span><span class="op">)</span> </span></code></pre></div>
<p>Et deux packages développés pour réaliser des ACP et visualiser les résultats:</p>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install_version("estimability", "1.4.1")</span></span>
<span><span class="co">#install.packages("FactoMineR") </span></span>
<span><span class="co">#install.packages("factoextra")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://factominer.free.fr">FactoMineR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://www.sthda.com/english/rpkgs/factoextra">factoextra</a></span><span class="op">)</span></span></code></pre></div>
<pre><code>## Welcome! Want to learn more? See two factoextra-related books at https://goo.gl/ve3WBa</code></pre>
<p>Les objectifs pour réaliser une ACP sont généralement :</p>
<ol style="list-style-type: decimal">
<li><p>Débroussailler un large set de données avec plein de variables</p></li>
<li><p>Réaliser un indicateur synthétique</p></li>
<li><p>Préparer à une classification</p></li>
</ol>
<p>Dans le cas ici, on va plutôt réaliser une ACP suivant le premier objectif sur les votes exprimés aux élections en Île de France aux élections présidentielles de 2022. L’objectif sera de voir on retrouve des structures dans la géographie de cette élection.</p>
</div>
<div id="importation-des-données" class="section level2" number="2.3">
<h2>
<span class="header-section-number">2.3</span> Importation des données<a class="anchor" aria-label="anchor" href="#importation-des-donn%C3%A9es"><i class="fas fa-link"></i></a>
</h2>
<div id="élections-2022" class="section level3" number="2.3.1">
<h3>
<span class="header-section-number">2.3.1</span> Élections 2022<a class="anchor" aria-label="anchor" href="#%C3%A9lections-2022"><i class="fas fa-link"></i></a>
</h3>
<p>Importation des données:</p>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span><span class="op">&lt;-</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim</a></span><span class="op">(</span><span class="st">"data/France/pres2022comm.csv"</span>, delim<span class="op">=</span><span class="st">","</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">19</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">codecommune</span><span class="op">!=</span><span class="st">"75056"</span><span class="op">)</span> <span class="co"># %&gt;% # On enlève la communes de Paris</span></span></code></pre></div>
<pre><code>## Rows: 34867 Columns: 97
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: ","
## chr  (4): dep, nomdep, codecommune, nomcommune
## dbl (93): inscrits, votants, exprimes, voixARTHAUD, voixPOUTOU, voixROUSSEL,...
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<p>On prend une table pour ne sélectionner que l’Île de France:</p>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">communes_table</span><span class="op">&lt;-</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim</a></span><span class="op">(</span><span class="st">"data/France/commune2021.csv"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Rows: 37742 Columns: 12
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: ","
## chr (11): TYPECOM, COM, REG, DEP, CTCD, ARR, NCC, NCCENR, LIBELLE, CAN, COMP...
## dbl  (1): TNCC
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span><span class="op">&lt;-</span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">communes_table</span>, by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"codecommune"</span><span class="op">=</span><span class="st">"COM"</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">REG</span><span class="op">==</span><span class="fl">11</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">20</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="communes" class="section level3" number="2.3.2">
<h3>
<span class="header-section-number">2.3.2</span> Communes<a class="anchor" aria-label="anchor" href="#communes"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">communes</span><span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html">st_read</a></span><span class="op">(</span><span class="st">"data/France/communes_arrond_ile_de_france.gpkg"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">insee</span><span class="op">!=</span><span class="st">"75056"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Reading layer `communes_arrond_ile_de_france' from data source 
##   `C:\Users\hugop\Nextcloud\git\book\data\France\communes_arrond_ile_de_france.gpkg' 
##   using driver `GPKG'
## Simple feature collection with 1287 features and 4 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: 1.446244 ymin: 48.12015 xmax: 3.559221 ymax: 49.24143
## Geodetic CRS:  WGS 84</code></pre>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># On importe les arrondissements de Paris, Lyon et Marseille</span></span>
<span><span class="va">arrond_lyon_mars_paris</span><span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html">st_read</a></span><span class="op">(</span><span class="st">"data/France/arrondissements_municipaux-20180711-shp/arrondissements_municipaux-20180711.shp"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">surf_km2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>geom<span class="op">=</span><span class="va">geometry</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Reading layer `arrondissements_municipaux-20180711' from data source 
##   `C:\Users\hugop\Nextcloud\git\book\data\France\arrondissements_municipaux-20180711-shp\arrondissements_municipaux-20180711.shp' 
##   using driver `ESRI Shapefile'
## Simple feature collection with 45 features and 4 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: 2.224122 ymin: 43.19714 xmax: 5.532476 ymax: 48.90216
## Geodetic CRS:  WGS 84</code></pre>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">communes</span><span class="op">&lt;-</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows</a></span><span class="op">(</span><span class="va">communes</span>,<span class="va">arrond_lyon_mars_paris</span><span class="op">)</span> <span class="co"># On joint communes et arrondissements</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">arrond_lyon_mars_paris</span><span class="op">)</span></span></code></pre></div>
<p>On ne garde que les communes de l’Ile de France:</p>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">communes</span><span class="op">&lt;-</span><span class="va">communes</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">communes_table</span>, by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"insee"</span><span class="op">=</span><span class="st">"COM"</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">REG</span><span class="op">==</span><span class="fl">11</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span><span class="op">:</span><span class="fl">15</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Warning in sf_column %in% names(g): Detected an unexpected many-to-many relationship between `x` and `y`.
## ℹ Row 17 of `x` matches multiple rows in `y`.
## ℹ Row 31675 of `y` matches multiple rows in `x`.
## ℹ If a many-to-many relationship is expected, set `relationship =
##   "many-to-many"` to silence this warning.</code></pre>
<p>On calcul la densité par communes:</p>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">communes</span><span class="op">&lt;-</span><span class="va">communes</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>surface<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_measures.html">st_area</a></span><span class="op">(</span><span class="va">geom</span><span class="op">)</span><span class="op">)</span><span class="op">/</span><span class="fl">10000</span><span class="op">)</span> <span class="co"># On calcul le superficie de chaque communes</span></span></code></pre></div>
<p>On créé un objet département pour la cartographie:</p>
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">departements_Paris</span><span class="op">&lt;-</span><span class="va">communes</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">communes_table</span>, by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"insee"</span><span class="op">=</span><span class="st">"COM"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">REG</span><span class="op">==</span><span class="fl">11</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">DEP</span>,<span class="va">REG</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>geom<span class="op">=</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_combine.html">st_union</a></span><span class="op">(</span><span class="va">geom</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Warning in sf_column %in% names(g): Detected an unexpected many-to-many relationship between `x` and `y`.
## ℹ Row 17 of `x` matches multiple rows in `y`.
## ℹ Row 31675 of `y` matches multiple rows in `x`.
## ℹ If a many-to-many relationship is expected, set `relationship =
##   "many-to-many"` to silence this warning.</code></pre>
<pre><code>## `summarise()` has grouped output by 'DEP'. You can override using the `.groups`
## argument.</code></pre>
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">communes_table</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="recodage" class="section level2" number="2.4">
<h2>
<span class="header-section-number">2.4</span> Recodage<a class="anchor" aria-label="anchor" href="#recodage"><i class="fas fa-link"></i></a>
</h2>
<p>Pour réaliser l’ACP il faut d’abord recoder les variables. On utilise généralement des variables en proportion:</p>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span><span class="op">&lt;-</span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>ARTHAUD<span class="op">=</span><span class="va">voixARTHAUD</span><span class="op">/</span><span class="va">exprimes</span>,</span>
<span>         POUTOU<span class="op">=</span><span class="va">voixPOUTOU</span><span class="op">/</span><span class="va">exprimes</span>,</span>
<span>         ROUSSEL<span class="op">=</span><span class="va">voixROUSSEL</span><span class="op">/</span><span class="va">exprimes</span>,</span>
<span>         MELENCHON<span class="op">=</span><span class="va">voixMELENCHON</span><span class="op">/</span><span class="va">exprimes</span>,</span>
<span>         JADOT<span class="op">=</span><span class="va">voixJADOT</span><span class="op">/</span><span class="va">exprimes</span>,</span>
<span>         HIDALGO<span class="op">=</span><span class="va">voixHIDALGO</span><span class="op">/</span><span class="va">exprimes</span>,</span>
<span>         LASSALLE<span class="op">=</span><span class="va">voixLASSALLE</span><span class="op">/</span><span class="va">exprimes</span>,</span>
<span>         MACRON<span class="op">=</span><span class="va">voixMACRON</span><span class="op">/</span><span class="va">exprimes</span>,</span>
<span>         PECRESSE<span class="op">=</span><span class="va">voixPECRESSE</span><span class="op">/</span><span class="va">exprimes</span>,</span>
<span>         ZEMMOUR<span class="op">=</span><span class="va">voixZEMMOUR</span><span class="op">/</span><span class="va">exprimes</span>,</span>
<span>         DUPONTAIGNAN<span class="op">=</span><span class="va">voixDUPONTAIGNAN</span><span class="op">/</span><span class="va">exprimes</span>,</span>
<span>         MLEPEN<span class="op">=</span><span class="va">voixMLEPEN</span><span class="op">/</span><span class="va">exprimes</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># De façon raccourcie, il est possible de réaliser de la façon suivante:</span></span>
<span></span>
<span><span class="co"># - en utilisant des pivot (tidyr) et un group by</span></span>
<span><span class="co"># data&lt;-data %&gt;%</span></span>
<span><span class="co">#   pivot_longer(cols= 8:19,names_to ="candidat", values_to = "voix" ) %&gt;%</span></span>
<span><span class="co">#   mutate(voix=voix/exprimes) %&gt;%</span></span>
<span><span class="co">#   pivot_wider(values_from = "voix", names_from = "candidat")</span></span>
<span></span>
<span><span class="co"># - de façon encore plus synthétique, en utilisant un across:</span></span>
<span><span class="co"># data&lt;-data %&gt;%</span></span>
<span><span class="co">#  mutate(across(8:19, ~ . /exprimes))</span></span></code></pre></div>
</div>
<div id="première-visualisation-des-données" class="section level2" number="2.5">
<h2>
<span class="header-section-number">2.5</span> Première visualisation des données<a class="anchor" aria-label="anchor" href="#premi%C3%A8re-visualisation-des-donn%C3%A9es"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">communes_voix</span><span class="op">&lt;-</span><span class="va">communes</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">data</span>, by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"insee"</span><span class="op">=</span><span class="st">"codecommune"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div id="une-carte-par-variable" class="section level3" number="2.5.1">
<h3>
<span class="header-section-number">2.5.1</span> Une carte par variable<a class="anchor" aria-label="anchor" href="#une-carte-par-variable"><i class="fas fa-link"></i></a>
</h3>
<p>On peut réaliser une carte pour chaque candidat:</p>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">12</span><span class="op">:</span><span class="fl">23</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># mf_export(x = communes_voix ,</span></span>
<span>  <span class="co">#           filename =paste0("TP09/cartes_candidats/carte_",names(communes_voix)[i],".png" ),</span></span>
<span>  <span class="co">#           width = 900)</span></span>
<span>  <span class="fu"><a href="https://riatelab.github.io/mapsf/reference/mf_map.html">mf_map</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">communes_voix</span>, col <span class="op">=</span> <span class="cn">NA</span>, border <span class="op">=</span> <span class="st">"gray25"</span>, lwd <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://riatelab.github.io/mapsf/reference/mf_map.html">mf_map</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">departements_Paris</span>, col <span class="op">=</span> <span class="cn">NA</span>, border <span class="op">=</span> <span class="st">"gray25"</span>, lwd <span class="op">=</span> <span class="fl">1</span>, add<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://riatelab.github.io/mapsf/reference/mf_map.html">mf_map</a></span><span class="op">(</span><span class="va">communes_voix</span> ,</span>
<span>         var<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">communes_voix</span><span class="op">)</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">communes_voix</span><span class="op">)</span><span class="op">[</span><span class="va">i</span><span class="op">+</span><span class="fl">12</span><span class="op">]</span><span class="op">)</span>,</span>
<span>         <span class="co">#val_max=max(unlist(communes_voix[,11:22])),</span></span>
<span>         type<span class="op">=</span><span class="st">"prop_choro"</span>,</span>
<span>         pal<span class="op">=</span><span class="st">"Viridis"</span>,</span>
<span>         inches<span class="op">=</span><span class="fl">0.1</span>,</span>
<span>         add<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span>  <span class="co">#dev.off()</span></span>
<span><span class="op">}</span></span></code></pre></div>
<pre><code>## 184 '0' values are not plotted on the map.</code></pre>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-52-1.png" width="672"></div>
<pre><code>## 101 '0' values are not plotted on the map.</code></pre>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-52-2.png" width="672"></div>
<pre><code>## 42 '0' values are not plotted on the map.</code></pre>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-52-3.png" width="672"><img src="bookdown-demo_files/figure-html/unnamed-chunk-52-4.png" width="672"></p>
<pre><code>## 8 '0' values are not plotted on the map.</code></pre>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-52-5.png" width="672"></div>
<pre><code>## 97 '0' values are not plotted on the map.</code></pre>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-52-6.png" width="672"></div>
<pre><code>## 18 '0' values are not plotted on the map.</code></pre>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-52-7.png" width="672"><img src="bookdown-demo_files/figure-html/unnamed-chunk-52-8.png" width="672"><img src="bookdown-demo_files/figure-html/unnamed-chunk-52-9.png" width="672"><img src="bookdown-demo_files/figure-html/unnamed-chunk-52-10.png" width="672"></p>
<pre><code>## 19 '0' values are not plotted on the map.</code></pre>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-52-11.png" width="672"><img src="bookdown-demo_files/figure-html/unnamed-chunk-52-12.png" width="672"></p>
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">i</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="matrice-de-corrélation" class="section level3" number="2.5.2">
<h3>
<span class="header-section-number">2.5.2</span> Matrice de corrélation<a class="anchor" aria-label="anchor" href="#matrice-de-corr%C3%A9lation"><i class="fas fa-link"></i></a>
</h3>
<p>On peut réaliser une matrice de corrélation:</p>
<div class="sourceCode" id="cb113"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cor.mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span>,<span class="fl">20</span><span class="op">:</span><span class="fl">31</span><span class="op">]</span>, use<span class="op">=</span><span class="st">"complete.obs"</span><span class="op">)</span>,<span class="fl">2</span><span class="op">)</span> <span class="co"># round(,2) permet d'arrondir à deux décimale et use="complete.obs" permet d'exclure les NA</span></span>
<span><span class="va">cor.mat</span></span></code></pre></div>
<pre><code>##              ARTHAUD POUTOU ROUSSEL MELENCHON JADOT HIDALGO LASSALLE MACRON
## ARTHAUD         1.00   0.09    0.05      0.05 -0.16   -0.04     0.08  -0.29
## POUTOU          0.09   1.00    0.14      0.00 -0.06   -0.03     0.10  -0.24
## ROUSSEL         0.05   0.14    1.00      0.17 -0.01    0.12     0.01  -0.22
## MELENCHON       0.05   0.00    0.17      1.00 -0.15    0.11    -0.35  -0.29
## JADOT          -0.16  -0.06   -0.01     -0.15  1.00    0.33    -0.06   0.58
## HIDALGO        -0.04  -0.03    0.12      0.11  0.33    1.00    -0.07   0.20
## LASSALLE        0.08   0.10    0.01     -0.35 -0.06   -0.07     1.00  -0.17
## MACRON         -0.29  -0.24   -0.22     -0.29  0.58    0.20    -0.17   1.00
## PECRESSE       -0.13  -0.07   -0.26     -0.54  0.06   -0.11     0.08   0.25
## ZEMMOUR        -0.07  -0.13   -0.27     -0.53  0.10   -0.14     0.14   0.25
## DUPONTAIGNAN    0.05   0.06    0.09     -0.29 -0.07   -0.11     0.16  -0.16
## MLEPEN          0.20   0.17    0.03     -0.40 -0.54   -0.31     0.31  -0.68
##              PECRESSE ZEMMOUR DUPONTAIGNAN MLEPEN
## ARTHAUD         -0.13   -0.07         0.05   0.20
## POUTOU          -0.07   -0.13         0.06   0.17
## ROUSSEL         -0.26   -0.27         0.09   0.03
## MELENCHON       -0.54   -0.53        -0.29  -0.40
## JADOT            0.06    0.10        -0.07  -0.54
## HIDALGO         -0.11   -0.14        -0.11  -0.31
## LASSALLE         0.08    0.14         0.16   0.31
## MACRON           0.25    0.25        -0.16  -0.68
## PECRESSE         1.00    0.32        -0.02  -0.03
## ZEMMOUR          0.32    1.00        -0.01  -0.03
## DUPONTAIGNAN    -0.02   -0.01         1.00   0.29
## MLEPEN          -0.03   -0.03         0.29   1.00</code></pre>
<p>Le package corrplot permet de visualiser cette matrice de corrélation de façon plus intuitive:</p>
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/taiyun/corrplot">"corrplot"</a></span><span class="op">)</span></span></code></pre></div>
<pre><code>## corrplot 0.94 loaded</code></pre>
<div class="sourceCode" id="cb117"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/corrplot/man/corrplot.html">corrplot</a></span><span class="op">(</span><span class="va">cor.mat</span>, tl.col<span class="op">=</span><span class="st">"black"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-54-1.png" width="672"></div>
<p>On peut exporter le résultat avec la fonction png de la façon suivante:</p>
<div class="sourceCode" id="cb118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#png(file="TP09/matrice_correlation.png", width = 1000, height = 1000)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/corrplot/man/corrplot.html">corrplot</a></span><span class="op">(</span><span class="va">cor.mat</span>, tl.col<span class="op">=</span><span class="st">"black"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-55-1.png" width="672"></div>
<div class="sourceCode" id="cb119"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#dev.off()</span></span></code></pre></div>
<p>On voit entre autres des corrélations :</p>
<ul>
<li>
<p>positives entre :</p>
<ul>
<li><p>le vote pour Hidalgo, Jadot et Macron,</p></li>
<li><p>le vote Pécresse, Zemmour et Macron</p></li>
</ul>
</li>
<li>
<p>négative entre:</p>
<ul>
<li><p>le vote Marine Le Pen et le vote Jadot-Macron</p></li>
<li><p>le vote Mélanchon et le vote Pecresse-Zemmour</p></li>
</ul>
</li>
</ul>
<p>Très peu de corrélation entre les vote Zemmour et Marine Lepene.</p>
<div class="sourceCode" id="cb120"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">cor.mat</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="réaliser-lacp" class="section level2" number="2.6">
<h2>
<span class="header-section-number">2.6</span> Réaliser l’ACP<a class="anchor" aria-label="anchor" href="#r%C3%A9aliser-lacp"><i class="fas fa-link"></i></a>
</h2>
<div id="une-acp-non-pondérée" class="section level3" number="2.6.1">
<h3>
<span class="header-section-number">2.6.1</span> Une ACP non pondérée<a class="anchor" aria-label="anchor" href="#une-acp-non-pond%C3%A9r%C3%A9e"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb121"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pca</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/pkg/FactoMineR/man/PCA.html">PCA</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span>,<span class="fl">20</span><span class="op">:</span><span class="fl">31</span><span class="op">]</span>, graph<span class="op">=</span><span class="cn">T</span>, ncp <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-57-1.png" width="672"><img src="bookdown-demo_files/figure-html/unnamed-chunk-57-2.png" width="672"></p>
<p>L’objet pca est une liste dans lequel se trouve tous les résultats de l’ACP. On peut y accéder directement ou utiliser des fonctions préfaites pour visualiser les résultats:</p>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># name               description</span></span>
<span><span class="co"># 1  "$eig"             "eigenvalues"</span></span>
<span><span class="co"># 2  "$var"             "results for the variables"</span></span>
<span><span class="co"># 3  "$var$coord"       "coord. for the variables"</span></span>
<span><span class="co"># 4  "$var$cor"         "correlations variables - dimensions"</span></span>
<span><span class="co"># 5  "$var$cos2"        "cos2 for the variables"</span></span>
<span><span class="co"># 6  "$var$contrib"     "contributions of the variables"</span></span>
<span><span class="co"># 7  "$ind"             "results for the individuals"</span></span>
<span><span class="co"># 8  "$ind$coord"       "coord. for the individuals"</span></span>
<span><span class="co"># 9  "$ind$cos2"        "cos2 for the individuals"</span></span>
<span><span class="co"># 10 "$ind$contrib"     "contributions of the individuals"</span></span>
<span><span class="co"># 11 "$call"            "summary statistics"</span></span>
<span><span class="co"># 12 "$call$centre"     "mean of the variables"</span></span>
<span><span class="co"># 13 "$call$ecart.type" "standard error of the variables"</span></span>
<span><span class="co"># 14 "$call$row.w"      "weights for the individuals"</span></span>
<span><span class="co"># 15 "$call$col.w"      "weights for the variables"</span></span></code></pre></div>
</div>
<div id="pondérer-le-calcul-de-lacp" class="section level3" number="2.6.2">
<h3>
<span class="header-section-number">2.6.2</span> Pondérer le calcul de l’ACP<a class="anchor" aria-label="anchor" href="#pond%C3%A9rer-le-calcul-de-lacp"><i class="fas fa-link"></i></a>
</h3>
<p>Dans le cas précédent chacuns des individus à le même poid et chaque variable également. On peut décider de modifier les poids.</p>
<p>Pourtant, il existe de grandes différences entre communes:</p>
<div class="sourceCode" id="cb123"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># mf_export(x = communes_voix ,</span></span>
<span><span class="co">#           filename =paste0("TP09/cartes_votes_exprimes.png" ),</span></span>
<span><span class="co">#           width = 900)</span></span>
<span><span class="fu"><a href="https://riatelab.github.io/mapsf/reference/mf_map.html">mf_map</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">communes_voix</span>, col <span class="op">=</span> <span class="cn">NA</span>, border <span class="op">=</span> <span class="st">"gray25"</span>, lwd <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://riatelab.github.io/mapsf/reference/mf_map.html">mf_map</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">departements_Paris</span>, col <span class="op">=</span> <span class="cn">NA</span>, border <span class="op">=</span> <span class="st">"gray25"</span>, lwd <span class="op">=</span> <span class="fl">1</span>, add<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://riatelab.github.io/mapsf/reference/mf_map.html">mf_map</a></span><span class="op">(</span><span class="va">communes_voix</span> ,</span>
<span>       var<span class="op">=</span> <span class="st">"exprimes"</span>,</span>
<span>       type<span class="op">=</span><span class="st">"prop"</span>,</span>
<span>       inches<span class="op">=</span><span class="fl">0.1</span>,</span>
<span>       add<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-59-1.png" width="672"></div>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#dev.off()</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">communes_voix</span><span class="op">)</span></span></code></pre></div>
<p>Si on souhaite pondérer les entités on peut utiliser “row.w =”:</p>
<div class="sourceCode" id="cb125"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pca</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/pkg/FactoMineR/man/PCA.html">PCA</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span>,<span class="fl">20</span><span class="op">:</span><span class="fl">31</span><span class="op">]</span>, row.w <span class="op">=</span><span class="va">data</span><span class="op">$</span><span class="va">exprimes</span>,ncp <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-60-1.png" width="672"><img src="bookdown-demo_files/figure-html/unnamed-chunk-60-2.png" width="672"></p>
<p>Pour pondérer les variables on peut utiliser col.w Attention: pour pondérer, il faut que tous les poids soient &gt;0. Dans le cas présent ça ne pose pas de problème.</p>
</div>
</div>
<div id="visualiser-les-résultats" class="section level2" number="2.7">
<h2>
<span class="header-section-number">2.7</span> Visualiser les résultats<a class="anchor" aria-label="anchor" href="#visualiser-les-r%C3%A9sultats"><i class="fas fa-link"></i></a>
</h2>
<div id="cercles-de-corrélation" class="section level3" number="2.7.1">
<h3>
<span class="header-section-number">2.7.1</span> Cercles de corrélation<a class="anchor" aria-label="anchor" href="#cercles-de-corr%C3%A9lation"><i class="fas fa-link"></i></a>
</h3>
<p>Ce résultat sont stocker dans l’objet pca:</p>
<div class="sourceCode" id="cb126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pca</span><span class="op">$</span><span class="va">var</span><span class="op">$</span><span class="va">coord</span></span></code></pre></div>
<pre><code>##                    Dim.1        Dim.2        Dim.3       Dim.4       Dim.5
## ARTHAUD       0.75783970  0.193700662  0.053886556 -0.33202051  0.22476966
## POUTOU        0.70415312  0.004765184  0.418058777 -0.07460159  0.23692366
## ROUSSEL       0.66687033 -0.124984377  0.299327347  0.62640195  0.14923271
## MELENCHON     0.74370403 -0.538863968 -0.340415783 -0.02007377 -0.09595007
## JADOT        -0.45229731 -0.533488252  0.663311687 -0.03924331 -0.01890221
## HIDALGO      -0.10246245 -0.687312206  0.620349032 -0.17878940 -0.04634065
## LASSALLE      0.07686699  0.764044366  0.449976355 -0.03134172  0.14026444
## MACRON       -0.94011924 -0.048504652  0.166318959  0.02380460  0.02352660
## PECRESSE     -0.88585300  0.321419606 -0.009943942  0.04293183  0.14109764
## ZEMMOUR      -0.79129943  0.372205374 -0.100007056  0.06375980  0.19413646
## DUPONTAIGNAN  0.19419953  0.681063286  0.357058840  0.04326915 -0.55375208
## MLEPEN        0.45088539  0.809295495  0.102917819 -0.06620236  0.04182531
##                     Dim.6       Dim.7       Dim.8         Dim.9       Dim.10
## ARTHAUD      -0.270976655  0.38461093 -0.05343325 -0.0045179775 -0.008370156
## POUTOU        0.499863557  0.02458871 -0.12931404 -0.0007009491  0.015475982
## ROUSSEL      -0.131302409  0.12543543  0.02976306 -0.0269964797  0.028203308
## MELENCHON     0.007735581 -0.03917968 -0.02553644  0.1644913917  0.010914950
## JADOT        -0.069747306  0.01101491 -0.04680005 -0.0019169799 -0.225853682
## HIDALGO      -0.040984394 -0.01196939  0.24982650  0.0054539159  0.183340122
## LASSALLE     -0.191952534 -0.29553028 -0.08181916  0.2339225539  0.025984130
## MACRON       -0.043682377  0.04938810 -0.18414230 -0.1216818436  0.031798367
## PECRESSE      0.017812438  0.11278338 -0.11425240 -0.0094676328  0.152069481
## ZEMMOUR       0.158100636  0.20993077  0.27169444  0.1793777244 -0.079291052
## DUPONTAIGNAN  0.082126654  0.22599626 -0.03151295  0.0577028315  0.017115750
## MLEPEN       -0.004296971 -0.15138365  0.19561196 -0.2456237780 -0.040599884
##                     Dim.11       Dim.12
## ARTHAUD      -0.0140271624 3.282270e-10
## POUTOU       -0.0156209607 3.891439e-10
## ROUSSEL      -0.0056358853 1.336890e-09
## MELENCHON     0.0401760796 2.360485e-08
## JADOT         0.1036719950 3.831603e-09
## HIDALGO      -0.0166654983 1.030643e-09
## LASSALLE     -0.0303200827 9.593980e-10
## MACRON       -0.1759761971 1.521580e-08
## PECRESSE      0.2019841257 5.393004e-09
## ZEMMOUR      -0.0469535055 5.553946e-09
## DUPONTAIGNAN  0.0000869299 1.563518e-09
## MLEPEN        0.0428961375 1.323804e-08</code></pre>
<p>Les cercle de corrélation permettent de visualiser entre les variables et les dimensions produites par l’ACP.</p>
<div class="sourceCode" id="cb128"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cercle_1_2</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/pkg/factoextra/man/fviz_pca.html">fviz_pca_var</a></span><span class="op">(</span><span class="va">pca</span>,  axes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">cercle_1_2</span></span></code></pre></div>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-62-1.png" width="672"></div>
<div class="sourceCode" id="cb129"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#ggsave(cercle_1_2,filename="TP09/cercle_correlation_1_2.png", width=7, height=7, bg="white")</span></span>
<span><span class="co">#rm(cercle_1_2)</span></span></code></pre></div>
<p>On peut décider de visualiser d’autres axes en modifiant le paramètre axes:</p>
<div class="sourceCode" id="cb130"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cercle_1_3</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/pkg/factoextra/man/fviz_pca.html">fviz_pca_var</a></span><span class="op">(</span><span class="va">pca</span>,  axes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">cercle_1_3</span></span></code></pre></div>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-63-1.png" width="672"></div>
<div class="sourceCode" id="cb131"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#ggsave(cercle_1_3,filename="TP09/cercle_correlation_1_3.png", width=7, height=7, bg="white")</span></span>
<span><span class="co">#rm(cercle_1_3)</span></span></code></pre></div>
<p>Pour faciliter la lecture, on peut inverser un axe en multipliant par -1 (dans notre cas, il est plus intuitif d’avoir la gauche politique à gauche et la droite à droite):</p>
<div class="sourceCode" id="cb132"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pca</span><span class="op">$</span><span class="va">var</span><span class="op">$</span><span class="va">coord</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span><span class="op">&lt;-</span> <span class="op">-</span><span class="fl">1</span><span class="op">*</span><span class="va">pca</span><span class="op">$</span><span class="va">var</span><span class="op">$</span><span class="va">coord</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span></span>
<span></span>
<span><span class="va">cercle_1_2</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/pkg/factoextra/man/fviz_pca.html">fviz_pca_var</a></span><span class="op">(</span><span class="va">pca</span>,  axes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span> <span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">cercle_1_2</span></span></code></pre></div>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-64-1.png" width="672"></div>
<div class="sourceCode" id="cb133"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#ggsave(cercle_1_2,filename="TP09/cercle_correlation_1_2.png", width=7, height=7, bg="white")</span></span></code></pre></div>
<p>Il faut alors aussi le faire sur les coordonnées des individus:</p>
<div class="sourceCode" id="cb134"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pca</span><span class="op">$</span><span class="va">ind</span><span class="op">$</span><span class="va">coord</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span><span class="op">&lt;-</span> <span class="op">-</span><span class="fl">1</span><span class="op">*</span> <span class="va">pca</span><span class="op">$</span><span class="va">ind</span><span class="op">$</span><span class="va">coord</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span></span></code></pre></div>
<p>On peut décider de ne pas afficher toutes les variables (si il y en a trop ça devient illisible). Ici, on décide d’afficher surtout (en modifiant la tranparance) celles qui ont le plus contribué à la construction de les deux axes (alpha.var=“contrib”) ou celle qui sont le plus prise en compte par les deux axes (alpha.var=“cos2”), soit encore de sélectionner celles qui ont un cos2 supérieur à un seuil (select.var = list(cos2 = 0.75) ) ou les 3 qui contribuent le plus (select.var = list(contrib = 3))):</p>
<div class="sourceCode" id="cb135"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/factoextra/man/fviz_pca.html">fviz_pca_var</a></span><span class="op">(</span><span class="va">pca</span>,  axes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, alpha.var<span class="op">=</span><span class="st">"contrib"</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-66-1.png" width="672"></div>
<div class="sourceCode" id="cb136"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/factoextra/man/fviz_pca.html">fviz_pca_var</a></span><span class="op">(</span><span class="va">pca</span>,  axes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, alpha.var<span class="op">=</span><span class="st">"cos2"</span><span class="op">)</span><span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-66-2.png" width="672"></div>
<div class="sourceCode" id="cb137"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/factoextra/man/fviz_pca.html">fviz_pca_var</a></span><span class="op">(</span><span class="va">pca</span>,  axes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, select.var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>cos2 <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span><span class="op">)</span><span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-66-3.png" width="672"></div>
<div class="sourceCode" id="cb138"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/factoextra/man/fviz_pca.html">fviz_pca_var</a></span><span class="op">(</span><span class="va">pca</span>,  axes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, select.var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>contrib <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-66-4.png" width="672"></div>
<p>Il est peut aussi être pertinent d’utiliser l’argument repel=T pour utiliser le package repel pour les étiquettes et éviter qu’elle ne se chevauches:</p>
<div class="sourceCode" id="cb139"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/factoextra/man/fviz_pca.html">fviz_pca_var</a></span><span class="op">(</span><span class="va">pca</span>,  axes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, repel<span class="op">=</span><span class="cn">T</span> <span class="op">)</span><span class="op">+</span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-67-1.png" width="672"></div>
</div>
<div id="contributions-de-chaque-variables" class="section level3" number="2.7.2">
<h3>
<span class="header-section-number">2.7.2</span> Contributions de chaque variables<a class="anchor" aria-label="anchor" href="#contributions-de-chaque-variables"><i class="fas fa-link"></i></a>
</h3>
<p>La contribution de chaque variable à la construction de chacune de dimension:</p>
<div class="sourceCode" id="cb140"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pca</span><span class="op">$</span><span class="va">var</span><span class="op">$</span><span class="va">contrib</span></span></code></pre></div>
<pre><code>##                   Dim.1        Dim.2        Dim.3       Dim.4       Dim.5
## ARTHAUD      11.9038406 1.231246e+00  0.183052896 19.83392132  9.58930308
## POUTOU       10.2770061 7.451467e-04 11.017687192  1.00132471 10.65438844
## ROUSSEL       9.2175433 5.126181e-01  5.648180142 70.59679126  4.22707266
## MELENCHON    11.4639072 9.528856e+00  7.305250657  0.07249975  1.74743980
## JADOT         4.2401420 9.339684e+00 27.736460944  0.27708309  0.06781672
## HIDALGO       0.2176015 1.550210e+01 24.259841866  5.75125091  0.40760167
## LASSALLE      0.1224650 1.915665e+01 12.764245064  0.17673574  3.73427942
## MACRON       18.3188531 7.720568e-02  1.743810408  0.10195308  0.10505823
## PECRESSE     16.2650617 3.390215e+00  0.006233513  0.33161753  3.77877609
## ZEMMOUR      12.9781893 4.546192e+00  0.630488306  0.73142974  7.15362007
## DUPONTAIGNAN  0.7816796 1.522150e+01  8.037025154  0.33684917 58.20260409
## MLEPEN        4.2137107 2.149298e+01  0.667723858  0.78854370  0.33203971
##                     Dim.6       Dim.7      Dim.8        Dim.9      Dim.10
## ARTHAUD      17.567987257 38.26088046  1.1309610 1.056017e-02  0.05892929
## POUTOU       59.780728472  0.15638066  6.6239329 2.541885e-04  0.20145614
## ROUSSEL       4.124807104  4.06960429  0.3508970 3.770484e-01  0.66905864
## MELENCHON     0.014316739  0.39703930  0.2583124 1.399810e+01  0.10020919
## JADOT         1.163893177  0.03138149  0.8675954 1.901157e-03 42.90604037
## HIDALGO       0.401878970  0.03705574 24.7230208 1.538862e-02 28.27347030
## LASSALLE      8.815479728 22.58997116  2.6517620 2.830917e+01  0.56791122
## MACRON        0.456531526  0.63089386 13.4317208 7.660100e+00  0.85049882
## PECRESSE      0.075911050  3.29004564  5.1707694 4.637305e-02 19.45128139
## ZEMMOUR       5.980334606 11.39892589 29.2405834 1.664638e+01  5.28825575
## DUPONTAIGNAN  1.613713804 13.21034744  0.3933712 1.722571e+00  0.24640866
## MLEPEN        0.004417566  5.92747407 15.1570737 3.121215e+01  1.38648022
##                    Dim.11      Dim.12
## ARTHAUD      2.190093e-01  0.01030897
## POUTOU       2.716054e-01  0.01449063
## ROUSSEL      3.535471e-02  0.17102445
## MELENCHON    1.796628e+00 53.31743705
## JADOT        1.196316e+01  1.40484268
## HIDALGO      3.091431e-01  0.10164445
## LASSALLE     1.023255e+00  0.08807739
## MACRON       3.446917e+01 22.15420622
## PECRESSE     4.541062e+01  2.78309654
## ZEMMOUR      2.453912e+00  2.95168558
## DUPONTAIGNAN 8.411265e-06  0.23392274
## MLEPEN       2.048139e+00 16.76926331</code></pre>
<p>On peut également afficher de façon graphique avec fviz_contrib:</p>
<div class="sourceCode" id="cb142"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/factoextra/man/fviz_contrib.html">fviz_contrib</a></span><span class="op">(</span><span class="va">pca</span>, choice <span class="op">=</span> <span class="st">"var"</span>, axes <span class="op">=</span> <span class="fl">1</span>, top <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-69-1.png" width="672"></div>
<div class="sourceCode" id="cb143"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/factoextra/man/fviz_contrib.html">fviz_contrib</a></span><span class="op">(</span><span class="va">pca</span>, choice <span class="op">=</span> <span class="st">"var"</span>, axes <span class="op">=</span> <span class="fl">2</span>, top <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-69-2.png" width="672"></div>
</div>
<div id="valeurs-propres-et-de-la-variance-expliquée" class="section level3" number="2.7.3">
<h3>
<span class="header-section-number">2.7.3</span> Valeurs propres et % de la variance expliquée<a class="anchor" aria-label="anchor" href="#valeurs-propres-et-de-la-variance-expliqu%C3%A9e"><i class="fas fa-link"></i></a>
</h3>
<p>Pour afficher les valeurs propres (eigen value) et le pourcentage de variance expliquée, on peut simplement afficher le tableau compris dans l’objet pca</p>
<div class="sourceCode" id="cb144"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pca</span><span class="op">$</span><span class="va">eig</span></span></code></pre></div>
<pre><code>##           eigenvalue percentage of variance cumulative percentage of variance
## comp 1  4.824670e+00           4.020558e+01                          40.20558
## comp 2  3.047316e+00           2.539430e+01                          65.59988
## comp 3  1.586296e+00           1.321913e+01                          78.81902
## comp 4  5.558034e-01           4.631695e+00                          83.45071
## comp 5  5.268516e-01           4.390430e+00                          87.84114
## comp 6  4.179668e-01           3.483056e+00                          91.32420
## comp 7  3.866235e-01           3.221863e+00                          94.54606
## comp 8  2.524500e-01           2.103750e+00                          96.64981
## comp 9  1.932934e-01           1.610779e+00                          98.26059
## comp 10 1.188874e-01           9.907285e-01                          99.25132
## comp 11 8.984151e-02           7.486793e-01                         100.00000
## comp 12 1.045041e-15           8.708673e-15                         100.00000</code></pre>
<p>On peut faire un graphique de la variance expliquées:</p>
<div class="sourceCode" id="cb146"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/factoextra/man/eigenvalue.html">fviz_screeplot</a></span><span class="op">(</span><span class="va">pca</span>, ncp<span class="op">=</span><span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-71-1.png" width="672"></div>
<p>Ces informations sont utiles pour nous aider à décider combien de composante retenir. Généralement, on s’arrange avec ces règles non-strictes: - eigenvalue &gt; 1 - variance cumulée &gt; 70% - gain faible d’une composante supplémentaire (ajouter une dimension supplémentaire ne permet pas de gagner beaucoup en variance expliquée)</p>
</div>
<div id="carte-de-scores" class="section level3" number="2.7.4">
<h3>
<span class="header-section-number">2.7.4</span> Carte de scores<a class="anchor" aria-label="anchor" href="#carte-de-scores"><i class="fas fa-link"></i></a>
</h3>
<p>Chaque individus est reprojeter sur les nouvelles dimensions. Leurs scores sont stocké dans l’objet pca:</p>
<div class="sourceCode" id="cb147"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">pca</span><span class="op">$</span><span class="va">ind</span><span class="op">$</span><span class="va">coord</span><span class="op">)</span></span></code></pre></div>
<pre><code>##      Dim.1      Dim.2       Dim.3        Dim.4       Dim.5      Dim.6
## 1 3.067555 -1.7114152  0.08150264 -0.185735850 -0.41247012 -0.1498315
## 2 2.511828 -2.7064534  0.70245008 -0.193923389 -0.70891924 -0.4567220
## 3 2.031107 -3.0966114  1.07311078 -0.404287195 -0.18691460 -0.5270521
## 4 2.201343 -2.4124210  1.18680228 -0.001301227 -0.20907736  0.2881203
## 5 1.991101 -2.2577563  1.02941720 -0.014047196 -0.02204558 -0.1995434
## 6 3.955340 -0.8826657 -0.20675170  0.106337247  0.01854102 -0.1812643
##         Dim.7       Dim.8      Dim.9      Dim.10      Dim.11        Dim.12
## 1 -0.31386218  0.51897558 -0.4392267  0.16799431 -0.45550607 -2.122990e-09
## 2 -0.53505432  0.36256495 -0.6205415 -0.13143940 -0.64944655 -2.768542e-09
## 3 -0.32566793  0.04083631 -0.7457277 -0.17322620 -0.51307636 -6.765777e-09
## 4 -0.18494092  0.55795434 -0.3835738  0.18158093 -0.51829968 -1.631543e-09
## 5 -0.07027549  0.24404548 -0.1594431  0.07828135 -0.03678451 -1.845831e-09
## 6  0.07415939 -0.23014907 -0.3167121  0.16569411 -0.35174294 -2.268829e-09</code></pre>
<p>On peut souhaiter les visualiser dans un graphique à deux dimensions:</p>
<div class="sourceCode" id="cb149"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/factoextra/man/fviz_pca.html">fviz_pca_ind</a></span><span class="op">(</span><span class="va">pca</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-73-1.png" width="672"></div>
<p>Forcément cela à du sens que si on a peu d’individus. Si les individus sont des entités géographiques, on peut souhaiter en faire des cartes.</p>
<p>On peut récupérer les score de chaque individus en collant avec bind_rows les coordonnées avec le set de données initiale. On doit utiliser ici bind_rows plutôt qu’une jointure (left_join, right_join) parce que l’agorythme de FactoMineR ne conserve pas d’ID lors de la réalisation de l’ACP mais il conserve bien l’ordre des lignes mise en entrée:</p>
<div class="sourceCode" id="cb150"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_pca</span><span class="op">&lt;-</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_cols.html">bind_cols</a></span><span class="op">(</span><span class="va">data</span>,</span>
<span>                    <span class="va">pca</span><span class="op">$</span><span class="va">ind</span><span class="op">$</span><span class="va">coord</span><span class="op">)</span></span></code></pre></div>
<p>On réalise une boucle pour visualiser les 3 premières dimensions en faisant d’abord la jointure entre nos résultats et l’objet commune:</p>
<div class="sourceCode" id="cb151"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">communes_pca</span><span class="op">&lt;-</span><span class="va">communes</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="va">data_pca</span>, by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"insee"</span><span class="op">=</span><span class="st">"codecommune"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="co"># mf_export(x = communes_pca ,</span></span>
<span>  <span class="co">#           filename =paste0("TP09/carte_acp_dim",i,".png" ),</span></span>
<span>  <span class="co">#           width = 900)</span></span>
<span>  <span class="fu"><a href="https://riatelab.github.io/mapsf/reference/mf_map.html">mf_map</a></span><span class="op">(</span><span class="va">communes_pca</span> ,</span>
<span>         var<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"Dim."</span>,<span class="va">i</span><span class="op">)</span>,</span>
<span>         type<span class="op">=</span><span class="st">"choro"</span>,</span>
<span>         pal<span class="op">=</span> <span class="st">"Viridis"</span>,</span>
<span>         lwd<span class="op">=</span><span class="fl">0.001</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://riatelab.github.io/mapsf/reference/mf_map.html">mf_map</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">departements_Paris</span>, col <span class="op">=</span> <span class="cn">NA</span>, border <span class="op">=</span> <span class="st">"gray25"</span>, lwd <span class="op">=</span> <span class="fl">1</span>, add<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span>  <span class="co"># dev.off()</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-75-1.png" width="672"><img src="bookdown-demo_files/figure-html/unnamed-chunk-75-2.png" width="672"><img src="bookdown-demo_files/figure-html/unnamed-chunk-75-3.png" width="672"></p>
<div class="sourceCode" id="cb152"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">i</span>,<span class="va">communes_pca</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="ajouter-des-variables-supplémentaires" class="section level2" number="2.8">
<h2>
<span class="header-section-number">2.8</span> Ajouter des variables supplémentaires<a class="anchor" aria-label="anchor" href="#ajouter-des-variables-suppl%C3%A9mentaires"><i class="fas fa-link"></i></a>
</h2>
<p>Pour aider à l’interprétation des axes, il peut être utile d’importer des nouvelles variables qui ne seront pas utilisées dans l’ACP mais qu’on pourra néanmoins utiliser comme repère.</p>
<div id="importation-des-données-1" class="section level3" number="2.8.1">
<h3>
<span class="header-section-number">2.8.1</span> Importation des données<a class="anchor" aria-label="anchor" href="#importation-des-donn%C3%A9es-1"><i class="fas fa-link"></i></a>
</h3>
<div id="population" class="section level4" number="2.8.1.1">
<h4>
<span class="header-section-number">2.8.1.1</span> Population<a class="anchor" aria-label="anchor" href="#population"><i class="fas fa-link"></i></a>
</h4>
<p>On importe les données de population:</p>
<div class="sourceCode" id="cb153"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pop</span><span class="op">&lt;-</span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data/France/population_insee_2021.xlsx"</span>, sheet<span class="op">=</span><span class="st">"Communes"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>codecommune<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">`Code département`</span>, <span class="va">`Code commune`</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">`Code région`</span><span class="op">==</span><span class="st">"11"</span><span class="op">)</span> <span class="co"># on garde que la France métropolitaine</span></span></code></pre></div>
<p>On joint avec le fichier spatial des communes et calcul la densité de population</p>
<div class="sourceCode" id="cb154"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">communes_pop</span><span class="op">&lt;-</span> <span class="va">communes</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">pop</span>, by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"insee"</span><span class="op">=</span><span class="st">"codecommune"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>densite_ha<span class="op">=</span><span class="va">`Population totale`</span><span class="op">/</span><span class="va">surface</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">insee</span>, <span class="va">densite_ha</span><span class="op">)</span></span></code></pre></div>
<p>On peut réaliser une carte de la densité de population</p>
<div class="sourceCode" id="cb155"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># mf_export(x = communes_pop ,</span></span>
<span><span class="co">#           filename =paste0("TP09/carte_densite.png" ),</span></span>
<span><span class="co">#           width = 900)</span></span>
<span><span class="fu"><a href="https://riatelab.github.io/mapsf/reference/mf_map.html">mf_map</a></span><span class="op">(</span><span class="va">communes_pop</span> ,</span>
<span>       var<span class="op">=</span> <span class="st">"densite_ha"</span>,</span>
<span>       type<span class="op">=</span><span class="st">"choro"</span>,</span>
<span>       pal<span class="op">=</span> <span class="st">"Viridis"</span>,</span>
<span>       lwd<span class="op">=</span><span class="fl">0.001</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://riatelab.github.io/mapsf/reference/mf_map.html">mf_map</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">departements_Paris</span>, col <span class="op">=</span> <span class="cn">NA</span>, border <span class="op">=</span> <span class="st">"red"</span>, lwd <span class="op">=</span> <span class="fl">1</span>, add<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-78-1.png" width="672"></div>
<div class="sourceCode" id="cb156"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#dev.off()</span></span></code></pre></div>
<p>On enlève transforme l’objet en dataframe et on enlève la colonne geom:</p>
<div class="sourceCode" id="cb157"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">communes_pop_df</span><span class="op">&lt;-</span><span class="va">communes_pop</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">geom</span><span class="op">)</span></span></code></pre></div>
<p>On réalise la jointure avec les données de base:</p>
<div class="sourceCode" id="cb158"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span><span class="op">&lt;-</span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">communes_pop_df</span>, by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"codecommune"</span><span class="op">=</span><span class="st">"insee"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">pop</span>,<span class="va">communes_pop</span>, <span class="va">communes_pop_df</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="revenus" class="section level4" number="2.8.1.2">
<h4>
<span class="header-section-number">2.8.1.2</span> Revenus<a class="anchor" aria-label="anchor" href="#revenus"><i class="fas fa-link"></i></a>
</h4>
<p>On importe les données de revenus, on conserve les champ qui nous intéresse et on transforme le champ revenu médian en “numeric”:</p>
<div class="sourceCode" id="cb159"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">revenus</span><span class="op">&lt;-</span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data/France/FILO2021_DEC_COM.xlsx"</span>, sheet<span class="op">=</span><span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>revenus<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">revenu_median</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">CODGEO</span>, <span class="va">revenus</span><span class="op">)</span></span></code></pre></div>
<p>On joint avec le fichier spatial des communes et les revenus:</p>
<div class="sourceCode" id="cb160"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">communes_revenus</span><span class="op">&lt;-</span> <span class="va">communes</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">revenus</span>, by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"insee"</span><span class="op">=</span><span class="st">"CODGEO"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>On peut réaliser une carte de revenu:</p>
<div class="sourceCode" id="cb161"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># mf_export(x = communes_revenus ,</span></span>
<span><span class="co">#           filename =paste0("TP09/carte_revenus.png" ),</span></span>
<span><span class="co">#           width = 900)</span></span>
<span><span class="fu"><a href="https://riatelab.github.io/mapsf/reference/mf_map.html">mf_map</a></span><span class="op">(</span><span class="va">communes_revenus</span> ,</span>
<span>       var<span class="op">=</span> <span class="st">"revenus"</span>,</span>
<span>       type<span class="op">=</span><span class="st">"choro"</span>,</span>
<span>       pal<span class="op">=</span> <span class="st">"Viridis"</span>,</span>
<span>       lwd<span class="op">=</span><span class="fl">0.001</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://riatelab.github.io/mapsf/reference/mf_map.html">mf_map</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">departements_Paris</span>, col <span class="op">=</span> <span class="cn">NA</span>, border <span class="op">=</span> <span class="st">"red"</span>, lwd <span class="op">=</span> <span class="fl">1</span>, add<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-83-1.png" width="672"></div>
<div class="sourceCode" id="cb162"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#dev.off()</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">communes_revenus</span><span class="op">)</span></span></code></pre></div>
<p>On réalise la jointure avec les données de base:</p>
<div class="sourceCode" id="cb163"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span><span class="op">&lt;-</span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">revenus</span>, by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"codecommune"</span><span class="op">=</span><span class="st">"CODGEO"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">revenus</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="acp-avec-les-variables-supplémentaires" class="section level3" number="2.8.2">
<h3>
<span class="header-section-number">2.8.2</span> ACP avec les variables supplémentaires<a class="anchor" aria-label="anchor" href="#acp-avec-les-variables-suppl%C3%A9mentaires"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb164"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pca</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/pkg/FactoMineR/man/PCA.html">PCA</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span>,<span class="fl">20</span><span class="op">:</span><span class="fl">33</span><span class="op">]</span>, quanti.sup <span class="op">=</span> <span class="fl">13</span><span class="op">:</span><span class="fl">14</span>, row.w <span class="op">=</span><span class="va">data</span><span class="op">$</span><span class="va">exprimes</span>, graph<span class="op">=</span><span class="cn">F</span>, ncp <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Warning in PCA(data[, 20:33], quanti.sup = 13:14, row.w = data$exprimes, :
## Missing values are imputed by the mean of the variable: you should use the
## imputePCA function of the missMDA package</code></pre>
<div class="sourceCode" id="cb166"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cercle_1_2</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/pkg/factoextra/man/fviz_pca.html">fviz_pca_var</a></span><span class="op">(</span><span class="va">pca</span>,  axes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">cercle_1_2</span></span></code></pre></div>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-85-1.png" width="672"></div>
<div class="sourceCode" id="cb167"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#ggsave(cercle_1_2,filename="TP09/cercle_correlation_1_2_revenu_pop.png", width=7, height=7, bg="white")</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">cercle_1_2</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">cercle_1_3</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/pkg/factoextra/man/fviz_pca.html">fviz_pca_var</a></span><span class="op">(</span><span class="va">pca</span>,  axes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">cercle_1_3</span></span></code></pre></div>
<div class="inline-figure"><img src="bookdown-demo_files/figure-html/unnamed-chunk-85-2.png" width="672"></div>
<div class="sourceCode" id="cb168"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#ggsave(cercle_1_3,filename="TP09/cercle_correlation_1_3_revenu_pop.png", width=7, height=7, bg="white")</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">cercle_1_3</span><span class="op">)</span></span></code></pre></div>
<p>On observe des fortes corrélations entre la première dimension qui dépeind une opposition gauche-droite et la variable de revenus, les revenus élevés étant associés aux communes où le vote de droite est important. La seconde dimension est quant à elle fortement corrélée à la densité de population et permet d’interprétée cette dernière comme l’opposition centre urbain-périphérie</p>
</div>
</div>
<div id="aller-plus-loin" class="section level2" number="2.9">
<h2>
<span class="header-section-number">2.9</span> Aller plus loin<a class="anchor" aria-label="anchor" href="#aller-plus-loin"><i class="fas fa-link"></i></a>
</h2>
<p>Il est possible de faire des ACP sur des données d’enquêtes soit en utilisant les poids comme présenté précédement soit grâce au package :svyprcomp (<a href="https://r-survey.r-forge.r-project.org/survey/html/svyprcomp.html" class="uri">https://r-survey.r-forge.r-project.org/survey/html/svyprcomp.html</a>)</p>
<p>On peut vouloir réaliser des légères rotations des axes pour améliorer la lecture des axes: <a href="https://stats.stackexchange.com/questions/59213/how-to-compute-varimax-rotated-principal-components-in-r%20https://dimension.usherbrooke.ca/pages/87">https://stats.stackexchange.com/questions/59213/how-to-compute-varimax-rotated-principal-components-in-r https://dimension.usherbrooke.ca/pages/87</a></p>
<p><a href="https://sites.google.com/site/rgraphiques/4--stat/machine-learning-biostatistiques-analyse-de-donn%C3%A9es/analyse-en-composantes-principales/la-rotation-varimax" class="uri">https://sites.google.com/site/rgraphiques/4--stat/machine-learning-biostatistiques-analyse-de-donn%C3%A9es/analyse-en-composantes-principales/la-rotation-varimax</a></p>
</div>
<div id="ressources-utilisées" class="section level2" number="2.10">
<h2>
<span class="header-section-number">2.10</span> Ressources utilisées:<a class="anchor" aria-label="anchor" href="#ressources-utilis%C3%A9es"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li><p><a href="http://www.sthda.com/english/wiki/wiki.php?id_contents=7851" class="uri">http://www.sthda.com/english/wiki/wiki.php?id_contents=7851</a></p></li>
<li><p><a href="http://factominer.free.fr/index_fr.html" class="uri">http://factominer.free.fr/index_fr.html</a></p></li>
</ul>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="r%C3%A9gressions.html"><span class="header-section-number">1</span> Régressions</a></div>
<div class="next"><a href="classification.html"><span class="header-section-number">3</span> Classification</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#analyse-en-composantes-principales"><span class="header-section-number">2</span> Analyse en Composantes Principales</a></li>
<li><a class="nav-link" href="#objectif"><span class="header-section-number">2.1</span> Objectif:</a></li>
<li><a class="nav-link" href="#donn%C3%A9es"><span class="header-section-number">2.2</span> Données:</a></li>
<li>
<a class="nav-link" href="#importation-des-donn%C3%A9es"><span class="header-section-number">2.3</span> Importation des données</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%C3%A9lections-2022"><span class="header-section-number">2.3.1</span> Élections 2022</a></li>
<li><a class="nav-link" href="#communes"><span class="header-section-number">2.3.2</span> Communes</a></li>
</ul>
</li>
<li><a class="nav-link" href="#recodage"><span class="header-section-number">2.4</span> Recodage</a></li>
<li>
<a class="nav-link" href="#premi%C3%A8re-visualisation-des-donn%C3%A9es"><span class="header-section-number">2.5</span> Première visualisation des données</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#une-carte-par-variable"><span class="header-section-number">2.5.1</span> Une carte par variable</a></li>
<li><a class="nav-link" href="#matrice-de-corr%C3%A9lation"><span class="header-section-number">2.5.2</span> Matrice de corrélation</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#r%C3%A9aliser-lacp"><span class="header-section-number">2.6</span> Réaliser l’ACP</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#une-acp-non-pond%C3%A9r%C3%A9e"><span class="header-section-number">2.6.1</span> Une ACP non pondérée</a></li>
<li><a class="nav-link" href="#pond%C3%A9rer-le-calcul-de-lacp"><span class="header-section-number">2.6.2</span> Pondérer le calcul de l’ACP</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#visualiser-les-r%C3%A9sultats"><span class="header-section-number">2.7</span> Visualiser les résultats</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#cercles-de-corr%C3%A9lation"><span class="header-section-number">2.7.1</span> Cercles de corrélation</a></li>
<li><a class="nav-link" href="#contributions-de-chaque-variables"><span class="header-section-number">2.7.2</span> Contributions de chaque variables</a></li>
<li><a class="nav-link" href="#valeurs-propres-et-de-la-variance-expliqu%C3%A9e"><span class="header-section-number">2.7.3</span> Valeurs propres et % de la variance expliquée</a></li>
<li><a class="nav-link" href="#carte-de-scores"><span class="header-section-number">2.7.4</span> Carte de scores</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#ajouter-des-variables-suppl%C3%A9mentaires"><span class="header-section-number">2.8</span> Ajouter des variables supplémentaires</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#importation-des-donn%C3%A9es-1"><span class="header-section-number">2.8.1</span> Importation des données</a></li>
<li><a class="nav-link" href="#acp-avec-les-variables-suppl%C3%A9mentaires"><span class="header-section-number">2.8.2</span> ACP avec les variables supplémentaires</a></li>
</ul>
</li>
<li><a class="nav-link" href="#aller-plus-loin"><span class="header-section-number">2.9</span> Aller plus loin</a></li>
<li><a class="nav-link" href="#ressources-utilis%C3%A9es"><span class="header-section-number">2.10</span> Ressources utilisées:</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Méthodes Quantitatives en Géographie</strong>" was written by Hugo Périlleux. It was last built on 2024-10-18.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
